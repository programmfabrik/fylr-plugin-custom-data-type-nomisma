plugin:
  name: custom-data-type-nomisma
  version: 2.0
  url: https://github.com/programmfabrik/fylr-plugin-custom-data-type-nomisma
  displayname:
    de-DE: Nomisma-Verknüpfung
    en-US: Nomisma-Referencing
  info:
    de-DE: Stellt Verknüpfungen mit den Discovery-System des National Archive London her.
    en-US: Use for references to entities of the discoverydystem of the National Archive London.
  l10n: l10n/customDataTypeNomisma.csv
  webfrontend:
    url: customDataTypeNomisma.js
    css: customDataTypeNomisma.css
    dependencies:
      - commons-library
    
base_url_prefix: "webfrontend"

custom_types:
  nomisma:
    mapping:
      conceptName:
        type: text
      conceptURI:
        type: text
      facetTerm:
        type: text_l10n
    config:
      schema:

      mask:
        - name: editor_display
          parameters:
            value:
              type: select
              options: ["default", "condensed"]
        - name: crro
          parameters:
            value:
              type: bool
        - name: ocre
          parameters:
            value:
              type: bool
        - name: pella
          parameters:
            value:
              type: bool
        - name: aod
          parameters:
            value:
              type: bool
        - name: sco
          parameters:
            value:
              type: bool
        - name: pco
          parameters:
            value:
              type: bool
        - name: oscar
          parameters:
            value:
              type: bool
        - name: bigr
          parameters:
            value:
              type: bool
        - name: coi
          parameters:
            value:
              type: bool
        - name: iacb
          parameters:
            value:
              type: bool

    update:
      plugin_user:
        reference: system:root
      exec:
        service: "node"
        commands:
          - prog: "node"
            stdin:
              type: body
            stdout:
              type: body
            args:
              - type: "value"
                value: "%_exec.pluginDir%/updater/NomismaUpdater.js"
              - type: "value"
                value: "%info.json%"
      timeout: 60
      batch_size: 1
      expires_days: 1

base_config:
  - name: update_nomisma
    group: update_custom_data_type
    parameters:
      restrict_time:
        type: bool
        default: false
        position: 0
      from_time:
        type: int
        default: 19
        min: 0
        max: 23
        position: 1
      to_time:
        type: int
        default: 4
        min: 0
        max: 23
        position: 2 